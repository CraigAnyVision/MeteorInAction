<head>
    <title>The House-Sitter</title>
</head>

<body>
    <h1>The House-Sitter App</h1>
    {{> selectHouse }}
    {{> showHouse }}
    {{> houseForm }}
</body>

<!-- Dropdown selector --->
<template name="selectHouse">

    <select id="selectHouse">

        <!-- Begin with an empty object selected -->
        <option value="" {{isSelected}}></option>

        {{#each housesNameId}}
            <option value="{{_id}}" {{isSelected}}>{{name}}</option>
        {{/each}} #B

    </select>

</template>

<template name="showHouse">

    <!-- setting the data context for the template explicitly-->
    {{#with house}}
        <!-- access db fields using dot notation -->
        <h2>Taking care of {{name}}'s house</h2>
         <!-- Display timestamp of last visit to this house -->
        <p>Last visit: {{lastvisit}}</p>
        <!-- each further narrows the datacontext for the subtemplate -->
        {{#each plants }}
            {{> plantDetails }}
        {{/each}}
    <!-- if house is null -->
    {{else}}
        You need to select a house.
    {{/with}}
</template>

<!-- subtemplate for showHouse template -->
<template name="plantDetails">
    <!-- db fields from house.plants context -->
    <p><strong>Plant color:</strong> {{color}}</p>
    <p><strong>Instructions:</strong> {{instructions}}
        <!-- data-id is a html generated ID, unique for each color of plant in a house-->
        <button class="water" data-id="{{../_id}}-{{color}}"
            {{isWatered}}>Done</button>
    </p>
</template>

<template name="houseForm">
    <h3>Add a house</h3>
    <form id="houseForm">
        Name <input id="house-name" type="text" placeholder="Name"><br/>
        Plant<br/>
        Color <input id="plant-color" type="text">
        Instructions <input id="plant-instructions" type="text">
        <br/>
        <br/>
        <button id="saveHouse">Save House</button>
    </form>
</template>